{% extends 'base_templates/base.html' %}

{% load i18n %}
{% load static %}

{% block customCSS %}
    <!-- Include your custom CSS files here -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/app_admin/btn.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/app_admin/user_profile.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
          integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css"
          integrity="sha512-b2QcS5SsA8tZodcDtGRELiGv5SaKSk1vDHDaQRda0htPYWZ6046lr3kJ5bAAQdpV2mmA/4v0wQF9MyU6/pDIAg=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
{% endblock %}

{% block title %}
    {{ page_title }}
{% endblock %}

{% block description %}
    {{ page_description }}
{% endblock %}

{% block body %}
    <section class="content content-wrapper">
        <div class="profile-container">
            <div class="messages" style="padding: 20px 0">
                {% if messages %}
                    {% for message in messages %}
                        <div class="alert alert-dismissible {% if message.tags %}alert-{% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}danger{% else %}{{ message.tags }}{% endif %}{% endif %}"
                             role="alert">{{ message }}</div>
                    {% endfor %}
                {% endif %}
            </div>
            <section class="profile-section">
                <h2>{% trans 'Transactions List' %}</h2>
                
                <div class="responsive-table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>{% trans 'Transaction ID' %}</th>
                                <th>{% trans 'Amount' %}</th>
                                <th>{% trans 'Payment Date' %}</th>
                                <th>{% trans 'Actions' %}</th> <!-- New column for actions -->
                            </tr>
                        </thead>
                        <tbody>
                            {% for transaction in transactions %}
                                <tr>
                                    <td>{{ transaction.transaction_id }}</td>
                                    <td>{{ transaction.amount }}</td>
                                    <td>{{ transaction.payment_date }}</td>
                                    <td>
                                        <!-- Refund button -->
                                        <form action="{% url 'refund_transaction' transaction.transaction_id %} " method="post">
                                            {% csrf_token %}
                                            <button type="submit" class="btn btn-danger">Refund</button>
                                        </form>
                                    </td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="4">{% trans 'No transactions available' %}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </section>
        </div>

        <div class="text-center"> <!-- Centered div -->
            <a href="{% url 'admin_view'%}" class="btn btn-primary">Back</a> <!-- Added Back Button -->
        </div>
        {% include 'modal/confirm_modal.html' %}
    </section>
{% endblock %}

{% block customJS %}
    <!-- Include your custom JS scripts here -->
    <!-- Bootstrap's JS and CSS (if not already included) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
            integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.8/umd/popper.min.js"
            integrity="sha512-TPh2Oxlg1zp+kz3nFA0C5vVC6leG/6mm1z9+mA81MI5eaUVqasPLO8Cuk4gMF4gUfP5etR73rgU/8PNMsSesoQ=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.min.js"
            integrity="sha512-WW8/jxkELe2CAiE4LvQfwm1rajOS8PHasCCx+knHG0gBHt8EXxS6T6tJRTGuDQVnluuAvMxWF4j8SNFDKceLFg=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- Include your custom JS files here -->
    <script src="{% static 'js/modal/show_modal.js' %}"></script>
{% endblock %}
